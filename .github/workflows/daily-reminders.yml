name: Daily Reminders

on:
  schedule:
    - cron: '0 0 * * *'  # Daily at midnight UTC
  workflow_dispatch:     # Manual trigger for testing

jobs:
  send-reminders:
    runs-on: ubuntu-latest
    steps:
      - name: Send Daily Reminders
        run: |
          echo "Sending daily reminders..."
          response=$(curl -s -o /dev/null -w "%{http_code}" -X POST https://www.bethereweddings.com/api/guests/send-reminders)
          if [ "$response" -eq 200 ]; then
            echo "✅ Daily reminders sent successfully"
          else
            echo "❌ Failed to send reminders (HTTP $response)"
            exit 1
          fi